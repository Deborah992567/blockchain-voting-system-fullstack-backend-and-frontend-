2026-01-02 23:31:14 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:31:43 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:31:44 | INFO | middleware.request_timing | http_request
2026-01-02 23:32:38 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:32:39 | INFO | middleware.request_timing | http_request
2026-01-02 23:32:39 | INFO | deps.timing | handler_time
2026-01-02 23:33:42 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:33:43 | INFO | middleware.request_timing | http_request
2026-01-02 23:33:43 | INFO | deps.timing | handler_time
2026-01-02 23:35:03 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:35:04 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:35:04 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:35:04 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:35:04 | INFO | middleware.request_timing | http_request
2026-01-02 23:35:04 | INFO | deps.timing | handler_time
2026-01-02 23:35:43 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:35:43 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:54:17 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:54:17 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:54:17 | DEBUG | auth.jwt | Access token created
2026-01-02 23:54:17 | DEBUG | db.session | DB session opened
2026-01-02 23:54:17 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x1084040e0>
           │    └ <redis.retry.Retry object at 0x1088e5ac0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x1088c6340>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10844b060>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x108454180>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x102e2e480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6163263488)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1045316c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6163263488)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x10642eb60>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x1088cbd00>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTQ6MTcuMzUzMjQ5In0='
              └ <function decode_access_token at 0x10644d3a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTQ6MTcuMzUzMjQ5In0='
             └ <function get at 0x10859ea20>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10832a3e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x108329ee0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x1084faa20>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x108524c20>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x108524cc0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x108457ce0>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x108457c40>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10844ac00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10844aca0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10844ae80>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:54:17 | WARNING | cache | Initialized in-memory fallback cache
2026-01-02 23:54:17 | DEBUG | auth.jwt | Token decoded
2026-01-02 23:54:17 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x1084040e0>
           │    └ <redis.retry.Retry object at 0x108a3c920>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x1088c5da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10844b060>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x108454180>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x102e2e480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6163263488)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1045316c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6163263488)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x10642eb60>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x1088cbd00>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTQ6MTcuMzUzMjQ5In0='
              └ <function decode_access_token at 0x10644d3a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 08:54:17.353249'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTQ6MTcuMzUzMjQ5In0='
    └ <function set at 0x10859eac0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10832a3e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x108329ee0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x1084faa20>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x108524c20>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x108524cc0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x108457ce0>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x108457c40>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10844ac00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10844aca0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10844ae80>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:54:17 | DEBUG | cache | Fallback cache SET
2026-01-02 23:54:17 | DEBUG | db.session | DB session closed
2026-01-02 23:54:17 | INFO | deps.timing | handler_time
2026-01-02 23:54:17 | ERROR | middleware.request_timing | Request failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1050c4900>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1045915b0>
    └ <sqlalchemy.engine.base.Connection object at 0x108a3cda0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x108a1fec0>

sqlite3.OperationalError: no such table: users


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x102e2e480>
    └ <Thread(asyncio-portal-1088b3320, started daemon 6146437120)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x102e2e160>
    └ <Thread(asyncio-portal-1088b3320, started daemon 6146437120)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(asyncio-portal-1088b3320, started daemon 6146437120)>
    │    │        │    └ ()
    │    │        └ <Thread(asyncio-portal-1088b3320, started daemon 6146437120)>
    │    └ <function start_blocking_portal.<locals>.run_blocking_portal at 0x1088c4cc0>
    └ <Thread(asyncio-portal-1088b3320, started daemon 6146437120)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 524, in run_blocking_portal
    run_eventloop(
    └ <function run at 0x10394e160>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_core/_eventloop.py", line 75, in run
    return async_backend.run(func, args, {}, backend_options)
           │             │   │     │         └ {}
           │             │   │     └ ()
           │             │   └ <function start_blocking_portal.<locals>.run_portal at 0x1088c4c20>
           │             └ <classmethod(<function AsyncIOBackend.run at 0x10453f380>)>
           └ <class 'anyio._backends._asyncio.AsyncIOBackend'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2365, in run
    return runner.run(wrapper())
           │      │   └ <function start_blocking_portal.<locals>.run_portal at 0x1088c4fe0>
           │      └ <function Runner.run at 0x104388900>
           └ <asyncio.runners.Runner object at 0x1088b31a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_por...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x10438e480>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1088b31a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x10438e3e0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x104388220>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x103b17b00>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 257, in _call_func
    retval = await retval_or_awaitable
                   └ <coroutine object FastAPI.__call__ at 0x1088d0a90>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x1088c4ea0>
                           │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x1088c4e00>
                           └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x1088c4ea0>
          │    │                │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x1088c4e00>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1088b38c0>
          └ <fastapi.applications.FastAPI object at 0x1086d14f0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1088c56c0>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x1088c4e00>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1088b3860>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1088b38c0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1088c56c0>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x1088c4e00>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x1088b3830>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1088b3860>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1088c5800>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x1088b3a70>
                     │    └ <function request_timing_middleware at 0x108750c20>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x1088b3830>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/middleware/request_timing.py", line 17, in request_timing_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.middleware.base._CachedRequest object at 0x1088b3a70>
                               └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1088c5800>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
          │            │       │            │       └ <attribute '__context__' of 'BaseException' objects>
          │            │       │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          │            │       └ <attribute '__cause__' of 'BaseException' objects>
          │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1088c5940>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1088b3800>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x1088b3830>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1088c5940>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │                            │    │    │     └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    │    └ <starlette.requests.Request object at 0x1088b34d0>
          │                            │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x1088b37d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1088b3800>
          └ <function wrap_app_handling_exceptions at 0x1061b6480>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1088c5b20>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x1088b37d0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1088c5b20>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <fastapi.routing.APIRouter object at 0x1087268d0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x1088b37d0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1088c5b20>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1087268d0>>
          └ <fastapi.routing.APIRouter object at 0x1087268d0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1088c5b20>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │     │      └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │     └ <function Route.handle at 0x1061b7a60>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1088c5b20>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <function request_response.<locals>.app at 0x1087e6520>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1088c5b20>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │                            │    │        └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    └ <starlette.requests.Request object at 0x1088b3e60>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1088c5bc0>
          └ <function wrap_app_handling_exceptions at 0x1061b6480>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1088c5d00>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1088c58a0>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <function request_response.<locals>.app.<locals>.app at 0x1088c5bc0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1088b3e60>
                     └ <function get_request_handler.<locals>.app at 0x1087e6660>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1061a3e20>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 616, in solve_dependencies
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1061a3e20>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 647, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
                   │                 │       │             └ {'token': 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTQ6MTcuMzUzMjQ5In0=', 'db': <sqlalchemy.orm.s...
                   │                 │       └ SolvedDependency(values={'token': 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTQ6MTcuMzUzMjQ5In0=',...
                   │                 └ <function get_current_user at 0x10642eb60>
                   └ <function run_in_threadpool at 0x105e122a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
                 │     │         │        └ functools.partial(<function get_current_user at 0x10642eb60>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
                 │     │         └ <function run_sync at 0x10394f4c0>
                 │     └ <module 'anyio.to_thread' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thre...
                 └ <module 'anyio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
                 └ <function get_async_backend at 0x10394e840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=OperationalError('(sqlite3.OperationalError) no such table: users')>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 20, in get_current_user
    user = db.query(User).filter(User.email == email).first()
           │  │     │            │    │        └ 'admin@example.com'
           │  │     │            │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x10644e660>
           │  │     │            └ <class 'app.models.user.User'>
           │  │     └ <class 'app.models.user.User'>
           │  └ <function Session.query at 0x10538ab60>
           └ <sqlalchemy.orm.session.Session object at 0x1088e4590>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x105304900>
           └ <sqlalchemy.orm.query.Query object at 0x108a3cad0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x1053899e0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x1088e4590>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x108a3ca70>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x105389760>
           └ <sqlalchemy.orm.session.Session object at 0x1088e4590>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x1051fbce0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x105018a40>
             └ <sqlalchemy.engine.base.Connection object at 0x108a3cda0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x108a3cce0>>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x105018d60>
           └ <sqlalchemy.engine.base.Connection object at 0x108a3cda0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x105018f40>
          └ <sqlalchemy.engine.base.Connection object at 0x108a3cda0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x105018fe0>
           └ <sqlalchemy.engine.base.Connection object at 0x108a3cda0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x105019260>
    └ <sqlalchemy.engine.base.Connection object at 0x108a3cda0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: users')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: users'), <traceback object at 0x108a3b280>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1050c4900>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1045915b0>
    └ <sqlalchemy.engine.base.Connection object at 0x108a3cda0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x108a1fec0>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_role, users.is_verified AS users_is_verified, users.wallet_private_key AS users_wallet_private_key, users.google_id AS users_google_id, users.github_id AS users_github_id 
FROM users 
WHERE users.email = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin@example.com', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-02 23:55:18 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:55:18 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:55:18 | DEBUG | auth.jwt | Access token created
2026-01-02 23:55:18 | DEBUG | db.session | DB session opened
2026-01-02 23:55:18 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a784360>
           │    └ <redis.retry.Retry object at 0x10acdf470>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10acc77e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a7c32e0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a7c8400>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x106831760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10acd6680>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTU6MTguNjE3OTY3In0='
              └ <function decode_access_token at 0x1085d2e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTU6MTguNjE3OTY3In0='
             └ <function get at 0x10a922ca0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10a6a6660>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10a6a6200>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a87aca0>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a8a0ea0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a8a0f40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a7cbf60>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a7cbec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a7c2e80>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a7c2f20>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a7c3100>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:55:18 | WARNING | cache | Initialized in-memory fallback cache
2026-01-02 23:55:18 | DEBUG | auth.jwt | Token decoded
2026-01-02 23:55:18 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a784360>
           │    └ <redis.retry.Retry object at 0x10ad323f0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10acc7ce0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a7c32e0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a7c8400>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x106831760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10acd6680>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTU6MTguNjE3OTY3In0='
              └ <function decode_access_token at 0x1085d2e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 08:55:18.617967'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTU6MTguNjE3OTY3In0='
    └ <function set at 0x10a922d40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10a6a6660>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10a6a6200>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a87aca0>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a8a0ea0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a8a0f40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a7cbf60>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a7cbec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a7c2e80>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a7c2f20>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a7c3100>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:55:18 | DEBUG | cache | Fallback cache SET
2026-01-02 23:55:18 | DEBUG | db.session | DB session closed
2026-01-02 23:55:18 | INFO | deps.timing | handler_time
2026-01-02 23:55:18 | ERROR | middleware.request_timing | Request failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x107307600>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1077e90d0>
    └ <sqlalchemy.engine.base.Connection object at 0x10ad32870>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x10aca5940>

sqlite3.OperationalError: no such table: users


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <Thread(asyncio-portal-10acdcc80, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1051ae160>
    └ <Thread(asyncio-portal-10acdcc80, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(asyncio-portal-10acdcc80, started daemon 6109999104)>
    │    │        │    └ ()
    │    │        └ <Thread(asyncio-portal-10acdcc80, started daemon 6109999104)>
    │    └ <function start_blocking_portal.<locals>.run_blocking_portal at 0x10acc6660>
    └ <Thread(asyncio-portal-10acdcc80, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 524, in run_blocking_portal
    run_eventloop(
    └ <function run at 0x105c66200>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_core/_eventloop.py", line 75, in run
    return async_backend.run(func, args, {}, backend_options)
           │             │   │     │         └ {}
           │             │   │     └ ()
           │             │   └ <function start_blocking_portal.<locals>.run_portal at 0x10acc65c0>
           │             └ <classmethod(<function AsyncIOBackend.run at 0x10683f420>)>
           └ <class 'anyio._backends._asyncio.AsyncIOBackend'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2365, in run
    return runner.run(wrapper())
           │      │   └ <function start_blocking_portal.<locals>.run_portal at 0x10acc6980>
           │      └ <function Runner.run at 0x10676c9a0>
           └ <asyncio.runners.Runner object at 0x10acdcb30>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_por...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x10676a520>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10acdcb30>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x10676a480>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x10676c2c0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x105e2bba0>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 257, in _call_func
    retval = await retval_or_awaitable
                   └ <coroutine object FastAPI.__call__ at 0x10acc9c60>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x10acc6840>
                           │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10acc67a0>
                           └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x10acc6840>
          │    │                │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10acc67a0>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10acdd250>
          └ <fastapi.applications.FastAPI object at 0x10aa4a660>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10acc7060>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10acc67a0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10a6a2c00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10acdd250>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10acc7060>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10acc67a0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10a6a2c00>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10acc71a0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10acdd430>
                     │    └ <function request_timing_middleware at 0x10aaccea0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/middleware/request_timing.py", line 17, in request_timing_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.middleware.base._CachedRequest object at 0x10acdd430>
                               └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10acc71a0>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
          │            │       │            │       └ <attribute '__context__' of 'BaseException' objects>
          │            │       │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          │            │       └ <attribute '__cause__' of 'BaseException' objects>
          │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10acc72e0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10acdd1c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10acc72e0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │                            │    │    │     └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    │    └ <starlette.requests.Request object at 0x10acdd070>
          │                            │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10acdd1c0>
          └ <function wrap_app_handling_exceptions at 0x1082f6840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10acc74c0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10acc74c0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <fastapi.routing.APIRouter object at 0x10aaa2d80>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10acc74c0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10aaa2d80>>
          └ <fastapi.routing.APIRouter object at 0x10aaa2d80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10acc74c0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │     │      └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │     └ <function Route.handle at 0x1082f7e20>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10acc74c0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <function request_response.<locals>.app at 0x10ab667a0>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10acc74c0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │                            │    │        └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    └ <starlette.requests.Request object at 0x10acdd850>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10acc7560>
          └ <function wrap_app_handling_exceptions at 0x1082f6840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10acc76a0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10acc7240>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <function request_response.<locals>.app.<locals>.app at 0x10acc7560>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10acdd850>
                     └ <function get_request_handler.<locals>.app at 0x10ab668e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1082f4220>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 616, in solve_dependencies
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1082f4220>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 647, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
                   │                 │       │             └ {'token': 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTU6MTguNjE3OTY3In0=', 'db': <sqlalchemy.orm.s...
                   │                 │       └ SolvedDependency(values={'token': 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTU6MTguNjE3OTY3In0=',...
                   │                 └ <function get_current_user at 0x1085b2f20>
                   └ <function run_in_threadpool at 0x107a063e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
                 │     │         │        └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
                 │     │         └ <function run_sync at 0x105c67560>
                 │     └ <module 'anyio.to_thread' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thre...
                 └ <module 'anyio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
                 └ <function get_async_backend at 0x105c668e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=OperationalError('(sqlite3.OperationalError) no such table: users')>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 20, in get_current_user
    user = db.query(User).filter(User.email == email).first()
           │  │     │            │    │        └ 'admin@example.com'
           │  │     │            │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x1085d2a20>
           │  │     │            └ <class 'app.models.user.User'>
           │  │     └ <class 'app.models.user.User'>
           │  └ <function Session.query at 0x1075dd8a0>
           └ <sqlalchemy.orm.session.Session object at 0x10acde000>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x10754b600>
           └ <sqlalchemy.orm.query.Query object at 0x10ad327e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x1075dc720>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x10acde000>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x10ad325d0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1075dc4a0>
           └ <sqlalchemy.orm.session.Session object at 0x10acde000>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10744ea20>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x10725f740>
             └ <sqlalchemy.engine.base.Connection object at 0x10ad32870>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10ad32810>>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x10725fa60>
           └ <sqlalchemy.engine.base.Connection object at 0x10ad32870>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x10725fc40>
          └ <sqlalchemy.engine.base.Connection object at 0x10ad32870>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x10725fce0>
           └ <sqlalchemy.engine.base.Connection object at 0x10ad32870>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x10725ff60>
    └ <sqlalchemy.engine.base.Connection object at 0x10ad32870>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: users')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: users'), <traceback object at 0x10acabcc0>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x107307600>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1077e90d0>
    └ <sqlalchemy.engine.base.Connection object at 0x10ad32870>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x10aca5940>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_role, users.is_verified AS users_is_verified, users.wallet_private_key AS users_wallet_private_key, users.google_id AS users_google_id, users.github_id AS users_github_id 
FROM users 
WHERE users.email = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin@example.com', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-02 23:55:19 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:55:19 | DEBUG | auth.jwt | Access token created
2026-01-02 23:55:19 | DEBUG | db.session | DB session opened
2026-01-02 23:55:19 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a784360>
           │    └ <redis.retry.Retry object at 0x10b32e570>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10b116020>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a7c32e0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a7c8400>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x106831760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10e7196c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjA0MTgyNyJ9'
              └ <function decode_access_token at 0x1085d2e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjA0MTgyNyJ9'
             └ <function get at 0x10a922ca0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10a6a6660>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10a6a6200>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a87aca0>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a8a0ea0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a8a0f40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a7cbf60>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a7cbec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a7c2e80>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a7c2f20>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a7c3100>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:55:19 | DEBUG | auth.jwt | Token decoded
2026-01-02 23:55:19 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a784360>
           │    └ <redis.retry.Retry object at 0x10b32fd70>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10b115a80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a7c32e0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a7c8400>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x106831760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10e7196c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjA0MTgyNyJ9'
              └ <function decode_access_token at 0x1085d2e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin2@example.com', 'exp': '2026-01-03 08:55:19.041827'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjA0MTgyNyJ9'
    └ <function set at 0x10a922d40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10a6a6660>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10a6a6200>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a87aca0>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a8a0ea0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a8a0f40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a7cbf60>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a7cbec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a7c2e80>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a7c2f20>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a7c3100>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:55:19 | DEBUG | cache | Fallback cache SET
2026-01-02 23:55:19 | DEBUG | db.session | DB session closed
2026-01-02 23:55:19 | INFO | deps.timing | handler_time
2026-01-02 23:55:19 | ERROR | middleware.request_timing | Request failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x107307600>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1077e90d0>
    └ <sqlalchemy.engine.base.Connection object at 0x10b332ab0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin2@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x10c765340>

sqlite3.OperationalError: no such table: users


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <Thread(asyncio-portal-10b32ea20, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1051ae160>
    └ <Thread(asyncio-portal-10b32ea20, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(asyncio-portal-10b32ea20, started daemon 6109999104)>
    │    │        │    └ ()
    │    │        └ <Thread(asyncio-portal-10b32ea20, started daemon 6109999104)>
    │    └ <function start_blocking_portal.<locals>.run_blocking_portal at 0x10b116fc0>
    └ <Thread(asyncio-portal-10b32ea20, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 524, in run_blocking_portal
    run_eventloop(
    └ <function run at 0x105c66200>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_core/_eventloop.py", line 75, in run
    return async_backend.run(func, args, {}, backend_options)
           │             │   │     │         └ {}
           │             │   │     └ ()
           │             │   └ <function start_blocking_portal.<locals>.run_portal at 0x10b1176a0>
           │             └ <classmethod(<function AsyncIOBackend.run at 0x10683f420>)>
           └ <class 'anyio._backends._asyncio.AsyncIOBackend'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2365, in run
    return runner.run(wrapper())
           │      │   └ <function start_blocking_portal.<locals>.run_portal at 0x10b117420>
           │      └ <function Runner.run at 0x10676c9a0>
           └ <asyncio.runners.Runner object at 0x10b32ca10>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_por...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x10676a520>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10b32ca10>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x10676a480>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x10676c2c0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x105e2bba0>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 257, in _call_func
    retval = await retval_or_awaitable
                   └ <coroutine object FastAPI.__call__ at 0x10ae415d0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x10b116ca0>
                           │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10b1174c0>
                           └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x10b116ca0>
          │    │                │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10b1174c0>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10acdd250>
          └ <fastapi.applications.FastAPI object at 0x10aa4a660>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10b1172e0>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10b1174c0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10a6a2c00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10acdd250>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10b1172e0>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10b1174c0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10a6a2c00>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10b117c40>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10b32f6b0>
                     │    └ <function request_timing_middleware at 0x10aaccea0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/middleware/request_timing.py", line 17, in request_timing_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.middleware.base._CachedRequest object at 0x10b32f6b0>
                               └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10b117c40>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
          │            │       │            │       └ <attribute '__context__' of 'BaseException' objects>
          │            │       │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          │            │       └ <attribute '__cause__' of 'BaseException' objects>
          │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10b116700>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10acdd1c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10b116700>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │                            │    │    │     └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    │    └ <starlette.requests.Request object at 0x10b32f8f0>
          │                            │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10acdd1c0>
          └ <function wrap_app_handling_exceptions at 0x1082f6840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10b116a20>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10b116a20>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <fastapi.routing.APIRouter object at 0x10aaa2d80>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10b116a20>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10aaa2d80>>
          └ <fastapi.routing.APIRouter object at 0x10aaa2d80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10b116a20>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │     │      └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │     └ <function Route.handle at 0x1082f7e20>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10b116a20>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <function request_response.<locals>.app at 0x10ab667a0>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10b116a20>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │                            │    │        └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    └ <starlette.requests.Request object at 0x10b32c410>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10b116ac0>
          └ <function wrap_app_handling_exceptions at 0x1082f6840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10b1167a0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10b116840>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <function request_response.<locals>.app.<locals>.app at 0x10b116ac0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10b32c410>
                     └ <function get_request_handler.<locals>.app at 0x10ab668e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1082f4220>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 616, in solve_dependencies
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1082f4220>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 647, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
                   │                 │       │             └ {'token': 'eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjA0MTgyNyJ9', 'db': <sqlalchemy.orm.s...
                   │                 │       └ SolvedDependency(values={'token': 'eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjA0MTgyNyJ9',...
                   │                 └ <function get_current_user at 0x1085b2f20>
                   └ <function run_in_threadpool at 0x107a063e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
                 │     │         │        └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
                 │     │         └ <function run_sync at 0x105c67560>
                 │     └ <module 'anyio.to_thread' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thre...
                 └ <module 'anyio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
                 └ <function get_async_backend at 0x105c668e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=OperationalError('(sqlite3.OperationalError) no such table: users')>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 20, in get_current_user
    user = db.query(User).filter(User.email == email).first()
           │  │     │            │    │        └ 'admin2@example.com'
           │  │     │            │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x1085d2a20>
           │  │     │            └ <class 'app.models.user.User'>
           │  │     └ <class 'app.models.user.User'>
           │  └ <function Session.query at 0x1075dd8a0>
           └ <sqlalchemy.orm.session.Session object at 0x10b32cf80>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x10754b600>
           └ <sqlalchemy.orm.query.Query object at 0x10b32ff80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x1075dc720>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x10b32cf80>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x10b32ff20>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1075dc4a0>
           └ <sqlalchemy.orm.session.Session object at 0x10b32cf80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10744ea20>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x10725f740>
             └ <sqlalchemy.engine.base.Connection object at 0x10b332ab0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10b333ad0>>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x10725fa60>
           └ <sqlalchemy.engine.base.Connection object at 0x10b332ab0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x10725fc40>
          └ <sqlalchemy.engine.base.Connection object at 0x10b332ab0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x10725fce0>
           └ <sqlalchemy.engine.base.Connection object at 0x10b332ab0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x10725ff60>
    └ <sqlalchemy.engine.base.Connection object at 0x10b332ab0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: users')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: users'), <traceback object at 0x10e4e6200>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x107307600>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1077e90d0>
    └ <sqlalchemy.engine.base.Connection object at 0x10b332ab0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin2@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x10c765340>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_role, users.is_verified AS users_is_verified, users.wallet_private_key AS users_wallet_private_key, users.google_id AS users_google_id, users.github_id AS users_github_id 
FROM users 
WHERE users.email = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin2@example.com', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-02 23:55:19 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:55:19 | DEBUG | auth.jwt | Access token created
2026-01-02 23:55:19 | DEBUG | db.session | DB session opened
2026-01-02 23:55:19 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a784360>
           │    └ <redis.retry.Retry object at 0x10b138b60>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10e721f80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a7c32e0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a7c8400>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x106831760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10e71a5c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjM1NTk3MiJ9'
              └ <function decode_access_token at 0x1085d2e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjM1NTk3MiJ9'
             └ <function get at 0x10a922ca0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10a6a6660>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10a6a6200>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a87aca0>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a8a0ea0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a8a0f40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a7cbf60>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a7cbec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a7c2e80>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a7c2f20>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a7c3100>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:55:19 | DEBUG | auth.jwt | Token decoded
2026-01-02 23:55:19 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a784360>
           │    └ <redis.retry.Retry object at 0x10b138b90>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x1077a7ce0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a7c32e0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a7c8400>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x106831760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6126825472)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10e71a5c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjM1NTk3MiJ9'
              └ <function decode_access_token at 0x1085d2e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin3@example.com', 'exp': '2026-01-03 08:55:19.355972'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjM1NTk3MiJ9'
    └ <function set at 0x10a922d40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10a6a6660>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10a6a6200>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a87aca0>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a8a0ea0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a8a0f40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a7cbf60>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a7cbec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a7c2e80>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a7c2f20>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a7c3100>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:55:19 | DEBUG | cache | Fallback cache SET
2026-01-02 23:55:19 | DEBUG | db.session | DB session closed
2026-01-02 23:55:19 | INFO | deps.timing | handler_time
2026-01-02 23:55:19 | ERROR | middleware.request_timing | Request failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x107307600>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1077e90d0>
    └ <sqlalchemy.engine.base.Connection object at 0x10b138ec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin3@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x10e9e4c40>

sqlite3.OperationalError: no such table: users


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1051ae480>
    └ <Thread(asyncio-portal-10b331bb0, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1051ae160>
    └ <Thread(asyncio-portal-10b331bb0, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(asyncio-portal-10b331bb0, started daemon 6109999104)>
    │    │        │    └ ()
    │    │        └ <Thread(asyncio-portal-10b331bb0, started daemon 6109999104)>
    │    └ <function start_blocking_portal.<locals>.run_blocking_portal at 0x10b115a80>
    └ <Thread(asyncio-portal-10b331bb0, started daemon 6109999104)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 524, in run_blocking_portal
    run_eventloop(
    └ <function run at 0x105c66200>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_core/_eventloop.py", line 75, in run
    return async_backend.run(func, args, {}, backend_options)
           │             │   │     │         └ {}
           │             │   │     └ ()
           │             │   └ <function start_blocking_portal.<locals>.run_portal at 0x10b116020>
           │             └ <classmethod(<function AsyncIOBackend.run at 0x10683f420>)>
           └ <class 'anyio._backends._asyncio.AsyncIOBackend'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2365, in run
    return runner.run(wrapper())
           │      │   └ <function start_blocking_portal.<locals>.run_portal at 0x1051af920>
           │      └ <function Runner.run at 0x10676c9a0>
           └ <asyncio.runners.Runner object at 0x10b332630>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_por...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x10676a520>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10b332630>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x10676a480>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x10676c2c0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x105e2bba0>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 257, in _call_func
    retval = await retval_or_awaitable
                   └ <coroutine object FastAPI.__call__ at 0x10ae425c0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x10b114680>
                           │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10b114540>
                           └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x10b114680>
          │    │                │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10b114540>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10acdd250>
          └ <fastapi.applications.FastAPI object at 0x10aa4a660>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10b114cc0>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10b114540>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10a6a2c00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10acdd250>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10b114cc0>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10b114540>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10a6a2c00>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10e723560>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10b333e30>
                     │    └ <function request_timing_middleware at 0x10aaccea0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/middleware/request_timing.py", line 17, in request_timing_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.middleware.base._CachedRequest object at 0x10b333e30>
                               └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10e723560>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
          │            │       │            │       └ <attribute '__context__' of 'BaseException' objects>
          │            │       │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          │            │       └ <attribute '__cause__' of 'BaseException' objects>
          │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10e7236a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10acdd1c0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10acdd1f0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10e7236a0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │                            │    │    │     └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    │    └ <starlette.requests.Request object at 0x10b32dc10>
          │                            │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10acdd1c0>
          └ <function wrap_app_handling_exceptions at 0x1082f6840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e722ac0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e722ac0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <fastapi.routing.APIRouter object at 0x10aaa2d80>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10acdd190>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e722ac0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10aaa2d80>>
          └ <fastapi.routing.APIRouter object at 0x10aaa2d80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e722ac0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │     │      └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │     └ <function Route.handle at 0x1082f7e20>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e722ac0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <function request_response.<locals>.app at 0x10ab667a0>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e722ac0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │                            │    │        └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    └ <starlette.requests.Request object at 0x10b330d70>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10e722b60>
          └ <function wrap_app_handling_exceptions at 0x1082f6840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10e722ca0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10e723600>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <function request_response.<locals>.app.<locals>.app at 0x10e722b60>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10b330d70>
                     └ <function get_request_handler.<locals>.app at 0x10ab668e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1082f4220>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 616, in solve_dependencies
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1082f4220>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 647, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
                   │                 │       │             └ {'token': 'eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjM1NTk3MiJ9', 'db': <sqlalchemy.orm.s...
                   │                 │       └ SolvedDependency(values={'token': 'eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA4OjU1OjE5LjM1NTk3MiJ9',...
                   │                 └ <function get_current_user at 0x1085b2f20>
                   └ <function run_in_threadpool at 0x107a063e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
                 │     │         │        └ functools.partial(<function get_current_user at 0x1085b2f20>, token='eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
                 │     │         └ <function run_sync at 0x105c67560>
                 │     └ <module 'anyio.to_thread' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thre...
                 └ <module 'anyio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
                 └ <function get_async_backend at 0x105c668e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=OperationalError('(sqlite3.OperationalError) no such table: users')>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 20, in get_current_user
    user = db.query(User).filter(User.email == email).first()
           │  │     │            │    │        └ 'admin3@example.com'
           │  │     │            │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x1085d2a20>
           │  │     │            └ <class 'app.models.user.User'>
           │  │     └ <class 'app.models.user.User'>
           │  └ <function Session.query at 0x1075dd8a0>
           └ <sqlalchemy.orm.session.Session object at 0x10b332f60>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x10754b600>
           └ <sqlalchemy.orm.query.Query object at 0x10b138ce0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x1075dc720>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x10b332f60>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x10b138d40>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1075dc4a0>
           └ <sqlalchemy.orm.session.Session object at 0x10b332f60>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10744ea20>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x10725f740>
             └ <sqlalchemy.engine.base.Connection object at 0x10b138ec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10b138e90>>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x10725fa60>
           └ <sqlalchemy.engine.base.Connection object at 0x10b138ec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x10725fc40>
          └ <sqlalchemy.engine.base.Connection object at 0x10b138ec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x10725fce0>
           └ <sqlalchemy.engine.base.Connection object at 0x10b138ec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x10725ff60>
    └ <sqlalchemy.engine.base.Connection object at 0x10b138ec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: users')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: users'), <traceback object at 0x10e701f40>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x107307600>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1077e90d0>
    └ <sqlalchemy.engine.base.Connection object at 0x10b138ec0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin3@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x10e9e4c40>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_role, users.is_verified AS users_is_verified, users.wallet_private_key AS users_wallet_private_key, users.google_id AS users_google_id, users.github_id AS users_github_id 
FROM users 
WHERE users.email = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin3@example.com', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-02 23:55:19 | INFO | middleware.request_timing | http_request
2026-01-02 23:55:19 | INFO | deps.timing | handler_time
2026-01-02 23:57:50 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:57:50 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:57:50 | DEBUG | auth.jwt | Access token created
2026-01-02 23:57:50 | DEBUG | db.session | DB session opened
2026-01-02 23:57:50 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x1120040e0>
           │    └ <redis.retry.Retry object at 0x1125e5790>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x1125c6340>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x11204b060>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x112054180>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1031ba480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6159413248)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1048d96c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6159413248)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x106f56b60>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x1125cb540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTc6NTAuODU1Mjc0In0='
              └ <function decode_access_token at 0x106f76ac0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTc6NTAuODU1Mjc0In0='
             └ <function get at 0x11219ea20>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x111f2a3e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x111f29ee0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x1120fea20>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x112124c20>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x112124cc0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x112057ce0>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x112057c40>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x11204ac00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x11204aca0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x11204ae80>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:57:50 | WARNING | cache | Initialized in-memory fallback cache
2026-01-02 23:57:50 | DEBUG | auth.jwt | Token decoded
2026-01-02 23:57:50 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x1120040e0>
           │    └ <redis.retry.Retry object at 0x11273c5c0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x1125c5f80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x11204b060>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x112054180>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1031ba480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6159413248)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1048d96c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6159413248)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x106f56b60>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x1125cb540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTc6NTAuODU1Mjc0In0='
              └ <function decode_access_token at 0x106f76ac0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 08:57:50.855274'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTc6NTAuODU1Mjc0In0='
    └ <function set at 0x11219eac0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x111f2a3e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x111f29ee0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x1120fea20>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x112124c20>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x112124cc0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x112057ce0>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x112057c40>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x11204ac00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x11204aca0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x11204ae80>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:57:50 | DEBUG | cache | Fallback cache SET
2026-01-02 23:57:50 | DEBUG | db.session | DB session closed
2026-01-02 23:57:50 | INFO | deps.timing | handler_time
2026-01-02 23:57:50 | ERROR | middleware.request_timing | Request failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1056fc900>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x105a770b0>
    └ <sqlalchemy.engine.base.Connection object at 0x11273caa0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x11271fd40>

sqlite3.OperationalError: no such table: users


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1031ba480>
    └ <Thread(asyncio-portal-1125b30b0, started daemon 6142586880)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1031ba160>
    └ <Thread(asyncio-portal-1125b30b0, started daemon 6142586880)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(asyncio-portal-1125b30b0, started daemon 6142586880)>
    │    │        │    └ ()
    │    │        └ <Thread(asyncio-portal-1125b30b0, started daemon 6142586880)>
    │    └ <function start_blocking_portal.<locals>.run_blocking_portal at 0x1125c4cc0>
    └ <Thread(asyncio-portal-1125b30b0, started daemon 6142586880)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 524, in run_blocking_portal
    run_eventloop(
    └ <function run at 0x103d52160>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_core/_eventloop.py", line 75, in run
    return async_backend.run(func, args, {}, backend_options)
           │             │   │     │         └ {}
           │             │   │     └ ()
           │             │   └ <function start_blocking_portal.<locals>.run_portal at 0x1125c4c20>
           │             └ <classmethod(<function AsyncIOBackend.run at 0x1048e7380>)>
           └ <class 'anyio._backends._asyncio.AsyncIOBackend'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2365, in run
    return runner.run(wrapper())
           │      │   └ <function start_blocking_portal.<locals>.run_portal at 0x1125c4fe0>
           │      └ <function Runner.run at 0x103fac900>
           └ <asyncio.runners.Runner object at 0x1125b2f90>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_por...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x103fb2480>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x1125b2f90>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x103fb23e0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x103fac220>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x103ed3b00>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 257, in _call_func
    retval = await retval_or_awaitable
                   └ <coroutine object FastAPI.__call__ at 0x1125d0a90>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x1125c4ea0>
                           │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x1125c4e00>
                           └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x1125c4ea0>
          │    │                │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x1125c4e00>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1125b3650>
          └ <fastapi.applications.FastAPI object at 0x1122d4560>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1125c56c0>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x1125c4e00>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x1125b35f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x1125b3650>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x1125c56c0>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x1125c4e00>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x1125b35c0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x1125b35f0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1125c5800>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x1125b37d0>
                     │    └ <function request_timing_middleware at 0x11234cc20>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x1125b35c0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/middleware/request_timing.py", line 17, in request_timing_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.middleware.base._CachedRequest object at 0x1125b37d0>
                               └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x1125c5800>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
          │            │       │            │       └ <attribute '__context__' of 'BaseException' objects>
          │            │       │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          │            │       └ <attribute '__cause__' of 'BaseException' objects>
          │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1125c5940>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1125b3590>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x1125b35c0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x1125c5940>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │                            │    │    │     └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    │    └ <starlette.requests.Request object at 0x1125b3440>
          │                            │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x1125b3560>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x1125b3590>
          └ <function wrap_app_handling_exceptions at 0x106bde480>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1125c5bc0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x1125b3560>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1125c5bc0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <fastapi.routing.APIRouter object at 0x1122d4f80>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x1125b3560>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1125c5bc0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1122d4f80>>
          └ <fastapi.routing.APIRouter object at 0x1122d4f80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1125c5bc0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │     │      └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │     └ <function Route.handle at 0x106bdfa60>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1125c5bc0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <function request_response.<locals>.app at 0x1123e6520>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1125c5bc0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │                            │    │        └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    └ <starlette.requests.Request object at 0x1125b3cb0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x1125c5c60>
          └ <function wrap_app_handling_exceptions at 0x106bde480>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x1125c5da0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x1125c58a0>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <function request_response.<locals>.app.<locals>.app at 0x1125c5c60>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x1125b3cb0>
                     └ <function get_request_handler.<locals>.app at 0x1123e6660>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x106bcbe20>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 616, in solve_dependencies
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x106bcbe20>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 647, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
                   │                 │       │             └ {'token': 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTc6NTAuODU1Mjc0In0=', 'db': <sqlalchemy.orm.s...
                   │                 │       └ SolvedDependency(values={'token': 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTc6NTAuODU1Mjc0In0=',...
                   │                 └ <function get_current_user at 0x106f56b60>
                   └ <function run_in_threadpool at 0x10673a2a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
                 │     │         │        └ functools.partial(<function get_current_user at 0x106f56b60>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
                 │     │         └ <function run_sync at 0x103d534c0>
                 │     └ <module 'anyio.to_thread' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thre...
                 └ <module 'anyio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
                 └ <function get_async_backend at 0x103d52840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=OperationalError('(sqlite3.OperationalError) no such table: users')>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 20, in get_current_user
    user = db.query(User).filter(User.email == email).first()
           │  │     │            │    │        └ 'admin@example.com'
           │  │     │            │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x106f76660>
           │  │     │            └ <class 'app.models.user.User'>
           │  │     └ <class 'app.models.user.User'>
           │  └ <function Session.query at 0x105ac2b60>
           └ <sqlalchemy.orm.session.Session object at 0x1125e42c0>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x105a3c900>
           └ <sqlalchemy.orm.query.Query object at 0x11273c7d0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x105ac19e0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x1125e42c0>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x11273c710>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x105ac1760>
           └ <sqlalchemy.orm.session.Session object at 0x1125e42c0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x105933ce0>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x105650a40>
             └ <sqlalchemy.engine.base.Connection object at 0x11273caa0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x11273c8c0>>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x105650d60>
           └ <sqlalchemy.engine.base.Connection object at 0x11273caa0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x105650f40>
          └ <sqlalchemy.engine.base.Connection object at 0x11273caa0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x105650fe0>
           └ <sqlalchemy.engine.base.Connection object at 0x11273caa0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x105651260>
    └ <sqlalchemy.engine.base.Connection object at 0x11273caa0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: users')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: users'), <traceback object at 0x11009b600>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1056fc900>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x105a770b0>
    └ <sqlalchemy.engine.base.Connection object at 0x11273caa0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x11271fd40>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_role, users.is_verified AS users_is_verified, users.wallet_private_key AS users_wallet_private_key, users.google_id AS users_google_id, users.github_id AS users_github_id 
FROM users 
WHERE users.email = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin@example.com', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2026-01-02 23:59:43 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-02 23:59:43 | DEBUG | auth.jwt | Creating access token
2026-01-02 23:59:43 | DEBUG | auth.jwt | Access token created
2026-01-02 23:59:43 | DEBUG | db.session | DB session opened
2026-01-02 23:59:43 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10ab4e020>
           │    └ <redis.retry.Retry object at 0x10b015640>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10affe340>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10ab90fe0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10ab920c0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1054de480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6122532864)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x106c2d6c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6122532864)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108ac2020>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10b002640>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTk6NDMuMjc4MDQ4In0='
              └ <function decode_access_token at 0x108ac2200>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTk6NDMuMjc4MDQ4In0='
             └ <function get at 0x10acfc9a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10aa98360>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10aa73ec0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10ac409a0>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10ac62b60>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10ac62c00>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10ab99c60>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10ab99bc0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10ab90b80>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10ab90c20>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10ab90e00>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:59:43 | WARNING | cache | Initialized in-memory fallback cache
2026-01-02 23:59:43 | DEBUG | auth.jwt | Token decoded
2026-01-02 23:59:43 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10ab4e020>
           │    └ <redis.retry.Retry object at 0x10b16c470>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10affec00>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10ab90fe0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10ab920c0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1054de480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6122532864)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x106c2d6c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6122532864)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108ac2020>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10b002640>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTk6NDMuMjc4MDQ4In0='
              └ <function decode_access_token at 0x108ac2200>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 08:59:43.278048'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTk6NDMuMjc4MDQ4In0='
    └ <function set at 0x10acfca40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10aa98360>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10aa73ec0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10ac409a0>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10ac62b60>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10ac62c00>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10ab99c60>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10ab99bc0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10ab90b80>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10ab90c20>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10ab90e00>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-02 23:59:43 | DEBUG | cache | Fallback cache SET
2026-01-02 23:59:43 | DEBUG | db.session | DB session closed
2026-01-02 23:59:43 | INFO | deps.timing | handler_time
2026-01-02 23:59:43 | ERROR | middleware.request_timing | Request failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1077b8720>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x107c96ed0>
    └ <sqlalchemy.engine.base.Connection object at 0x10b16c950>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x10b14fdc0>

sqlite3.OperationalError: no such table: users


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1054de480>
    └ <Thread(asyncio-portal-109737590, started daemon 6105706496)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1054de160>
    └ <Thread(asyncio-portal-109737590, started daemon 6105706496)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1010, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(asyncio-portal-109737590, started daemon 6105706496)>
    │    │        │    └ ()
    │    │        └ <Thread(asyncio-portal-109737590, started daemon 6105706496)>
    │    └ <function start_blocking_portal.<locals>.run_blocking_portal at 0x10affccc0>
    └ <Thread(asyncio-portal-109737590, started daemon 6105706496)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 524, in run_blocking_portal
    run_eventloop(
    └ <function run at 0x106866160>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_core/_eventloop.py", line 75, in run
    return async_backend.run(func, args, {}, backend_options)
           │             │   │     │         └ {}
           │             │   │     └ ()
           │             │   └ <function start_blocking_portal.<locals>.run_portal at 0x10affcc20>
           │             └ <classmethod(<function AsyncIOBackend.run at 0x106c3b380>)>
           └ <class 'anyio._backends._asyncio.AsyncIOBackend'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2365, in run
    return runner.run(wrapper())
           │      │   └ <function start_blocking_portal.<locals>.run_portal at 0x10affcfe0>
           │      └ <function Runner.run at 0x106a84900>
           └ <asyncio.runners.Runner object at 0x10aff2c90>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='anyio.from_thread.start_blocking_portal.<locals>.run_portal' coro=<start_blocking_portal.<locals>.run_por...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x106a8a480>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x10aff2c90>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 674, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x106a8a3e0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 641, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x106a84220>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py", line 1987, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x1069e7b00>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/events.py", line 88, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=True>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=True>)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/from_thread.py", line 257, in _call_func
    retval = await retval_or_awaitable
                   └ <coroutine object FastAPI.__call__ at 0x10aff88b0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x10affcea0>
                           │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10affce00>
                           └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function _TestClientTransport.handle_request.<locals>.send at 0x10affcea0>
          │    │                │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10affce00>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10aff3290>
          └ <fastapi.applications.FastAPI object at 0x10ae010d0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10affd620>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10affce00>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10aff3230>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10aff3290>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10affd620>
          │    │   │      └ <function _TestClientTransport.handle_request.<locals>.receive at 0x10affce00>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10aff3200>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10aff3230>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10affd760>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10aff3470>
                     │    └ <function request_timing_middleware at 0x10ae894e0>
                     └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10aff3200>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/middleware/request_timing.py", line 17, in request_timing_middleware
    response: Response = await call_next(request)
                               │         └ <starlette.middleware.base._CachedRequest object at 0x10aff3470>
                               └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10affd760>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
          │            │       │            │       └ <attribute '__context__' of 'BaseException' objects>
          │            │       │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          │            │       └ <attribute '__cause__' of 'BaseException' objects>
          │            └ OperationalError('(sqlite3.OperationalError) no such table: users')
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10affd8a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10aff31d0>
          └ <starlette.middleware.base.BaseHTTPMiddleware object at 0x10aff3200>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10affd8a0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │                            │    │    │     └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    │    └ <starlette.requests.Request object at 0x10aff3140>
          │                            │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10aff31a0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10aff31d0>
          └ <function wrap_app_handling_exceptions at 0x108855800>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10affdb20>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10aff31a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10affdb20>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <fastapi.routing.APIRouter object at 0x10ae62ff0>
          └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x10aff31a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10affdb20>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │    │                └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x10ae62ff0>>
          └ <fastapi.routing.APIRouter object at 0x10ae62ff0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10affdb20>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │     │      └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │     └ <function Route.handle at 0x108856de0>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10affdb20>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │    │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │    └ <function request_response.<locals>.app at 0x10af1ef20>
          └ APIRoute(path='/elections/', name='create_election', methods=['POST'])
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 125, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10affdb20>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │                            │    │        └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          │                            │    └ <starlette.requests.Request object at 0x10aff39b0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10affdbc0>
          └ <function wrap_app_handling_exceptions at 0x108855800>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10affdd00>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10affd800>
          │   └ {'type': 'http', 'http_version': '1.1', 'method': 'POST', 'path': '/elections/', 'raw_path': b'/elections/', 'root_path': '',...
          └ <function request_response.<locals>.app.<locals>.app at 0x10affdbc0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 111, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10aff39b0>
                     └ <function get_request_handler.<locals>.app at 0x10af1f060>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 381, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x10882f1a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 616, in solve_dependencies
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x10882f1a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 647, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
                   │                 │       │             └ {'token': 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTk6NDMuMjc4MDQ4In0=', 'db': <sqlalchemy.orm.s...
                   │                 │       └ SolvedDependency(values={'token': 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDg6NTk6NDMuMjc4MDQ4In0=',...
                   │                 └ <function get_current_user at 0x108ac2020>
                   └ <function run_in_threadpool at 0x107f59620>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/concurrency.py", line 32, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
                 │     │         │        └ functools.partial(<function get_current_user at 0x108ac2020>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
                 │     │         └ <function run_sync at 0x1068674c0>
                 │     └ <module 'anyio.to_thread' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thre...
                 └ <module 'anyio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/to_thread.py", line 61, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
                 └ <function get_async_backend at 0x106866840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2525, in run_sync_in_worker_thread
    return await future
                 └ <Future finished exception=OperationalError('(sqlite3.OperationalError) no such table: users')>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 20, in get_current_user
    user = db.query(User).filter(User.email == email).first()
           │  │     │            │    │        └ 'admin@example.com'
           │  │     │            │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x107b5e340>
           │  │     │            └ <class 'app.models.user.User'>
           │  │     └ <class 'app.models.user.User'>
           │  └ <function Session.query at 0x107a7e480>
           └ <sqlalchemy.orm.session.Session object at 0x10b014140>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2759, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x107a00180>
           └ <sqlalchemy.orm.query.Query object at 0x10b16c680>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x107a7d300>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x10b014140>
            │                  │    │      │      └ <sqlalchemy.orm.query.Query object at 0x10b16c5c0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x107a7d080>
           └ <sqlalchemy.orm.session.Session object at 0x10b014140>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x1078ef600>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x107714860>
             └ <sqlalchemy.engine.base.Connection object at 0x10b16c950>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10b16c830>>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x107714b80>
           └ <sqlalchemy.engine.base.Connection object at 0x10b16c950>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x107714d60>
          └ <sqlalchemy.engine.base.Connection object at 0x10b16c950>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x107714e00>
           └ <sqlalchemy.engine.base.Connection object at 0x10b16c950>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x107715080>
    └ <sqlalchemy.engine.base.Connection object at 0x10b16c950>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: users')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: users'), <traceback object at 0x10b16a080>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: users')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1077b8720>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x107c96ed0>
    └ <sqlalchemy.engine.base.Connection object at 0x10b16c950>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('admin@example.com', 1, 0)
    │      │       └ 'SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_rol...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x10b14fdc0>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: users
[SQL: SELECT users.id AS users_id, users.email AS users_email, users.password_hash AS users_password_hash, users.role AS users_role, users.is_verified AS users_is_verified, users.wallet_private_key AS users_wallet_private_key, users.google_id AS users_google_id, users.github_id AS users_github_id 
FROM users 
WHERE users.email = ?
 LIMIT ? OFFSET ?]
[parameters: ('admin@example.com', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
