2026-01-03 00:04:20 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-03 00:04:20 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:04:20 | DEBUG | auth.jwt | Access token created
2026-01-03 00:04:20 | DEBUG | db.session | DB session opened
2026-01-03 00:04:20 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x113581ee0>
           │    └ <redis.retry.Retry object at 0x113be9430>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x113bce340>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x1135c4ea0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x1135c5f80>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x10329e480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6162608128)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x105a456c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6162608128)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1111b1ee0>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x113bd29c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MDQ6MjAuNTI5NzEzIn0='
              └ <function decode_access_token at 0x1111b20c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MDQ6MjAuNTI5NzEzIn0='
             └ <function get at 0x113730860>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x1134d0220>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x1134a7d80>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x113678860>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x113696a20>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x113696ac0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x1135cdb20>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x1135cda80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x1135c4a40>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1135c4ae0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1135c4cc0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:04:20 | WARNING | cache | Initialized in-memory fallback cache
2026-01-03 00:04:20 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:04:20 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x113581ee0>
           │    └ <redis.retry.Retry object at 0x113d3c260>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x113bcec00>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x1135c4ea0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x1135c5f80>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x10329e480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6162608128)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x105a456c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6162608128)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1111b1ee0>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x113bd29c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MDQ6MjAuNTI5NzEzIn0='
              └ <function decode_access_token at 0x1111b20c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 09:04:20.529713'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MDQ6MjAuNTI5NzEzIn0='
    └ <function set at 0x113730900>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x1134d0220>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x1134a7d80>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x113678860>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x113696a20>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x113696ac0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x1135cdb20>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x1135cda80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x1135c4a40>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1135c4ae0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1135c4cc0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:04:20 | DEBUG | cache | Fallback cache SET
2026-01-03 00:04:20 | DEBUG | db.session | DB session closed
2026-01-03 00:04:20 | INFO | deps.timing | handler_time
2026-01-03 00:04:20 | INFO | middleware.request_timing | http_request
2026-01-03 00:05:31 | ERROR | blockchain.web3 | Blockchain not connected
2026-01-03 00:05:43 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-03 00:06:00 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-03 00:06:36 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-03 00:06:37 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:06:37 | DEBUG | auth.jwt | Access token created
2026-01-03 00:06:37 | DEBUG | db.session | DB session opened
2026-01-03 00:06:37 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x109709d00>
           │    └ <redis.retry.Retry object at 0x10a6e33e0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a6eade0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x109760e00>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x109761ee0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1055befc0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6125760512)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x10a6be200>
    └ <WorkerThread(AnyIO worker thread, started daemon 6125760512)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x107f94e00>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a6f03c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MDY6MzcuMDcxNTQ3In0='
              └ <function decode_access_token at 0x107fc2480>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MDY6MzcuMDcxNTQ3In0='
             └ <function get at 0x10a3865c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10a368c20>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10962fc40>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a214900>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a242c00>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a242ca0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x109769a80>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x1097699e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x1097609a0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x109760a40>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x109760c20>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:06:37 | WARNING | cache | Initialized in-memory fallback cache
2026-01-03 00:06:37 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:06:37 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x109709d00>
           │    └ <redis.retry.Retry object at 0x10a742090>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a6ea840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x109760e00>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x109761ee0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1055befc0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6125760512)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x10a6be200>
    └ <WorkerThread(AnyIO worker thread, started daemon 6125760512)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x107f94e00>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a6f03c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MDY6MzcuMDcxNTQ3In0='
              └ <function decode_access_token at 0x107fc2480>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 09:06:37.071547'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MDY6MzcuMDcxNTQ3In0='
    └ <function set at 0x10a386660>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10a368c20>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10962fc40>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a214900>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a242c00>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a242ca0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x109769a80>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x1097699e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x1097609a0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x109760a40>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x109760c20>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:06:37 | DEBUG | cache | Fallback cache SET
2026-01-03 00:06:37 | DEBUG | db.session | DB session closed
2026-01-03 00:06:37 | INFO | deps.timing | handler_time
2026-01-03 00:06:37 | INFO | middleware.request_timing | http_request
2026-01-03 00:21:13 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-03 00:33:28 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-03 00:33:28 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:33:28 | DEBUG | auth.jwt | Access token created
2026-01-03 00:33:28 | DEBUG | db.session | DB session opened
2026-01-03 00:33:28 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x106865da0>
           │    └ <redis.retry.Retry object at 0x106d29760>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x106d162a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x1068a4d60>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x1068a5e40>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x101296480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192345088)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1029416c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192345088)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1047d5da0>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x106d13480>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6MjguNjAxNzI3In0='
              └ <function decode_access_token at 0x1047d5f80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6MjguNjAxNzI3In0='
             └ <function get at 0x106a10720>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x1067b40e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x106787c40>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10695c720>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10697a8e0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10697a980>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x1068ad9e0>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x1068ad940>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x1068a4900>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1068a49a0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1068a4b80>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:28 | WARNING | cache | Initialized in-memory fallback cache
2026-01-03 00:33:28 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:33:28 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x106865da0>
           │    └ <redis.retry.Retry object at 0x106e80500>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x106d16b60>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x1068a4d60>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x1068a5e40>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x101296480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192345088)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1029416c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192345088)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1047d5da0>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x106d13480>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6MjguNjAxNzI3In0='
              └ <function decode_access_token at 0x1047d5f80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 09:33:28.601727'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6MjguNjAxNzI3In0='
    └ <function set at 0x106a107c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x1067b40e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x106787c40>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10695c720>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10697a8e0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10697a980>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x1068ad9e0>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x1068ad940>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x1068a4900>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1068a49a0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1068a4b80>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:28 | DEBUG | cache | Fallback cache SET
2026-01-03 00:33:28 | INFO | routes.election | Create election requested
2026-01-03 00:33:28 | ERROR | routes.election | Failed to deploy election contract; continuing without contract
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 117, in apply_formatters_to_dict
    yield key, formatters[key](item)
          │    │          │    └ '0x...'
          │    │          └ 'bytecode'
          │    └ {'abi': <function normalize_abi at 0x1054199e0>, 'address': functools.partial(<function normalize_address at 0x105419a80>, <w...
          └ 'bytecode'
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/normalizers.py", line 278, in normalize_bytecode
    return HexBytes(bytecode)
           │        └ '0x...'
           └ <class 'hexbytes.main.HexBytes'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/main.py", line 35, in __new__
    bytesval = to_bytes(val)
               │        └ '0x...'
               └ <function to_bytes at 0x104ed2f20>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 17, in to_bytes
    return hexstr_to_bytes(val)
           │               └ '0x...'
           └ <function hexstr_to_bytes at 0x104ed2fc0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 54, in hexstr_to_bytes
    return binascii.unhexlify(ascii_hex)
           │        │         └ b'0...'
           │        └ <built-in function unhexlify>
           └ <module 'binascii' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload/binascii.cpython-312-d...

binascii.Error: Non-hexadecimal digit found


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x101296480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192345088)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1029416c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192345088)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_election at 0x1047d6020>, db=<sqlalchemy.orm.session.Session object at 0x106d28260>, admin...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x106ca4300>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/routes/election.py", line 26, in create_election
    contract_address = deploy_election(candidate_names)
                       │               └ ['Alice', 'Bob']
                       └ <function deploy_election at 0x1047d5ee0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/blockchain/deploy.py", line 12, in deploy_election
    contract = w3.eth.contract(abi=ELECTION_ABI, bytecode=BYTECODE)
               │  │   │            │                      └ '0x...'
               │  │   │            └ [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpayable', 't...
               │  │   └ <function Eth.contract at 0x105c54ae0>
               │  └ <web3.eth.eth.Eth object at 0x105c6cc50>
               └ <web3.main.Web3 object at 0x105c6c9b0>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/eth/eth.py", line 689, in contract
    ContractFactory = ContractFactoryClass.factory(self.w3, **kwargs)
                      │                    │       │    │     └ {'abi': [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpaya...
                      │                    │       │    └ <web3.main.Web3 object at 0x105c6c9b0>
                      │                    │       └ <web3.eth.eth.Eth object at 0x105c6cc50>
                      │                    └ <classmethod(<function Contract.factory at 0x105c34720>)>
                      └ <class 'web3.contract.contract.Contract'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/contract/contract.py", line 476, in factory
    PropertyCheckingFactory(
    └ <class 'web3._utils.datatypes.PropertyCheckingFactory'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/datatypes.py", line 58, in __new__
    processed_namespace = apply_formatters_to_dict(
                          └ <function apply_formatters_to_dict at 0x104e44f40>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/functional.py", line 47, in inner
    return callback(fn(*args, **kwargs))
           │        │   │       └ {}
           │        │   └ ({'abi': <function normalize_abi at 0x1054199e0>, 'address': functools.partial(<function normalize_address at 0x105419a80>, <...
           │        └ <function apply_formatters_to_dict at 0x104e44ea0>
           └ <class 'dict'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 122, in apply_formatters_to_dict
    raise ValueError(new_error_message) from exc
                     └ "Could not format invalid value '0x...' as field 'bytecode'"

ValueError: Could not format invalid value '0x...' as field 'bytecode'
2026-01-03 00:33:28 | INFO | routes.election | Election created
2026-01-03 00:33:28 | INFO | middleware.request_timing | http_request
2026-01-03 00:33:28 | DEBUG | db.session | DB session closed
2026-01-03 00:33:28 | INFO | deps.timing | handler_time
2026-01-03 00:33:46 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-03 00:33:46 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:33:46 | DEBUG | auth.jwt | Access token created
2026-01-03 00:33:46 | DEBUG | db.session | DB session opened
2026-01-03 00:33:46 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107ae5970>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107ad6160>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad3e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDYuOTQ5OTE3In0='
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDYuOTQ5OTE3In0='
             └ <function get at 0x1077c8540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:46 | WARNING | cache | Initialized in-memory fallback cache
2026-01-03 00:33:46 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:33:46 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107c347d0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107ad5a80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad3e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDYuOTQ5OTE3In0='
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 09:33:46.949917'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDYuOTQ5OTE3In0='
    └ <function set at 0x1077c85e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:46 | DEBUG | cache | Fallback cache SET
2026-01-03 00:33:46 | INFO | routes.election | Create election requested
2026-01-03 00:33:46 | ERROR | routes.election | Failed to deploy election contract; continuing without contract
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 117, in apply_formatters_to_dict
    yield key, formatters[key](item)
          │    │          │    └ '0x...'
          │    │          └ 'bytecode'
          │    └ {'abi': <function normalize_abi at 0x105dc1800>, 'address': functools.partial(<function normalize_address at 0x105dc18a0>, <w...
          └ 'bytecode'
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/normalizers.py", line 278, in normalize_bytecode
    return HexBytes(bytecode)
           │        └ '0x...'
           └ <class 'hexbytes.main.HexBytes'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/main.py", line 35, in __new__
    bytesval = to_bytes(val)
               │        └ '0x...'
               └ <function to_bytes at 0x1057bade0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 17, in to_bytes
    return hexstr_to_bytes(val)
           │               └ '0x...'
           └ <function hexstr_to_bytes at 0x1057bae80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 54, in hexstr_to_bytes
    return binascii.unhexlify(ascii_hex)
           │        │         └ b'0...'
           │        └ <built-in function unhexlify>
           └ <module 'binascii' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload/binascii.cpython-312-d...

binascii.Error: Non-hexadecimal digit found


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_election at 0x1050b1ee0>, db=<sqlalchemy.orm.session.Session object at 0x107ae4470>, admin...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x105fc4b40>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/routes/election.py", line 26, in create_election
    contract_address = deploy_election(candidate_names)
                       │               └ ['Alice', 'Bob']
                       └ <function deploy_election at 0x1050b1da0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/blockchain/deploy.py", line 12, in deploy_election
    contract = w3.eth.contract(abi=ELECTION_ABI, bytecode=BYTECODE)
               │  │   │            │                      └ '0x...'
               │  │   │            └ [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpayable', 't...
               │  │   └ <function Eth.contract at 0x1071f8900>
               │  └ <web3.eth.eth.Eth object at 0x107214a10>
               └ <web3.main.Web3 object at 0x10571a720>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/eth/eth.py", line 689, in contract
    ContractFactory = ContractFactoryClass.factory(self.w3, **kwargs)
                      │                    │       │    │     └ {'abi': [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpaya...
                      │                    │       │    └ <web3.main.Web3 object at 0x10571a720>
                      │                    │       └ <web3.eth.eth.Eth object at 0x107214a10>
                      │                    └ <classmethod(<function Contract.factory at 0x1071d8540>)>
                      └ <class 'web3.contract.contract.Contract'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/contract/contract.py", line 476, in factory
    PropertyCheckingFactory(
    └ <class 'web3._utils.datatypes.PropertyCheckingFactory'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/datatypes.py", line 58, in __new__
    processed_namespace = apply_formatters_to_dict(
                          └ <function apply_formatters_to_dict at 0x105740e00>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/functional.py", line 47, in inner
    return callback(fn(*args, **kwargs))
           │        │   │       └ {}
           │        │   └ ({'abi': <function normalize_abi at 0x105dc1800>, 'address': functools.partial(<function normalize_address at 0x105dc18a0>, <...
           │        └ <function apply_formatters_to_dict at 0x105740d60>
           └ <class 'dict'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 122, in apply_formatters_to_dict
    raise ValueError(new_error_message) from exc
                     └ "Could not format invalid value '0x...' as field 'bytecode'"

ValueError: Could not format invalid value '0x...' as field 'bytecode'
2026-01-03 00:33:46 | INFO | routes.election | Election created
2026-01-03 00:33:46 | INFO | middleware.request_timing | http_request
2026-01-03 00:33:46 | DEBUG | db.session | DB session closed
2026-01-03 00:33:46 | INFO | deps.timing | handler_time
2026-01-03 00:33:46 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:33:46 | DEBUG | auth.jwt | Access token created
2026-01-03 00:33:46 | DEBUG | db.session | DB session opened
2026-01-03 00:33:46 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107cb1610>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107ca1620>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad3e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ2Ljk5MDY3MCJ9'
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ2Ljk5MDY3MCJ9'
             └ <function get at 0x1077c8540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:46 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:33:46 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107cb29c0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107ca1940>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad3e80>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ2Ljk5MDY3MCJ9'
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin2@example.com', 'exp': '2026-01-03 09:33:46.990670'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ2Ljk5MDY3MCJ9'
    └ <function set at 0x1077c85e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:46 | DEBUG | cache | Fallback cache SET
2026-01-03 00:33:46 | INFO | routes.election | Create election requested
2026-01-03 00:33:46 | ERROR | routes.election | Failed to deploy election contract; continuing without contract
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 117, in apply_formatters_to_dict
    yield key, formatters[key](item)
          │    │          │    └ '0x...'
          │    │          └ 'bytecode'
          │    └ {'abi': <function normalize_abi at 0x105dc1800>, 'address': functools.partial(<function normalize_address at 0x105dc18a0>, <w...
          └ 'bytecode'
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/normalizers.py", line 278, in normalize_bytecode
    return HexBytes(bytecode)
           │        └ '0x...'
           └ <class 'hexbytes.main.HexBytes'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/main.py", line 35, in __new__
    bytesval = to_bytes(val)
               │        └ '0x...'
               └ <function to_bytes at 0x1057bade0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 17, in to_bytes
    return hexstr_to_bytes(val)
           │               └ '0x...'
           └ <function hexstr_to_bytes at 0x1057bae80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 54, in hexstr_to_bytes
    return binascii.unhexlify(ascii_hex)
           │        │         └ b'0...'
           │        └ <built-in function unhexlify>
           └ <module 'binascii' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload/binascii.cpython-312-d...

binascii.Error: Non-hexadecimal digit found


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_election at 0x1050b1ee0>, db=<sqlalchemy.orm.session.Session object at 0x107cb00e0>, admin...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ca6900>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/routes/election.py", line 26, in create_election
    contract_address = deploy_election(candidate_names)
                       │               └ ['X', 'Y']
                       └ <function deploy_election at 0x1050b1da0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/blockchain/deploy.py", line 12, in deploy_election
    contract = w3.eth.contract(abi=ELECTION_ABI, bytecode=BYTECODE)
               │  │   │            │                      └ '0x...'
               │  │   │            └ [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpayable', 't...
               │  │   └ <function Eth.contract at 0x1071f8900>
               │  └ <web3.eth.eth.Eth object at 0x107214a10>
               └ <web3.main.Web3 object at 0x10571a720>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/eth/eth.py", line 689, in contract
    ContractFactory = ContractFactoryClass.factory(self.w3, **kwargs)
                      │                    │       │    │     └ {'abi': [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpaya...
                      │                    │       │    └ <web3.main.Web3 object at 0x10571a720>
                      │                    │       └ <web3.eth.eth.Eth object at 0x107214a10>
                      │                    └ <classmethod(<function Contract.factory at 0x1071d8540>)>
                      └ <class 'web3.contract.contract.Contract'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/contract/contract.py", line 476, in factory
    PropertyCheckingFactory(
    └ <class 'web3._utils.datatypes.PropertyCheckingFactory'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/datatypes.py", line 58, in __new__
    processed_namespace = apply_formatters_to_dict(
                          └ <function apply_formatters_to_dict at 0x105740e00>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/functional.py", line 47, in inner
    return callback(fn(*args, **kwargs))
           │        │   │       └ {}
           │        │   └ ({'abi': <function normalize_abi at 0x105dc1800>, 'address': functools.partial(<function normalize_address at 0x105dc18a0>, <...
           │        └ <function apply_formatters_to_dict at 0x105740d60>
           └ <class 'dict'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 122, in apply_formatters_to_dict
    raise ValueError(new_error_message) from exc
                     └ "Could not format invalid value '0x...' as field 'bytecode'"

ValueError: Could not format invalid value '0x...' as field 'bytecode'
2026-01-03 00:33:47 | INFO | routes.election | Election created
2026-01-03 00:33:47 | INFO | middleware.request_timing | http_request
2026-01-03 00:33:47 | DEBUG | db.session | DB session closed
2026-01-03 00:33:47 | INFO | deps.timing | handler_time
2026-01-03 00:33:47 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:33:47 | DEBUG | auth.jwt | Access token created
2026-01-03 00:33:47 | DEBUG | db.session | DB session opened
2026-01-03 00:33:47 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107cb0ef0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107ca2ac0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad3ac0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
             └ <function get at 0x1077c8540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:47 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:33:47 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107ccc3b0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x103be3ba0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad3ac0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'voter@example.com', 'exp': '2026-01-03 09:33:47.004320'}
    │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
    └ <function set at 0x1077c85e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:47 | DEBUG | cache | Fallback cache SET
2026-01-03 00:33:47 | INFO | routes.vote | Cast vote attempt
2026-01-03 00:33:47 | INFO | routes.vote | Vote cast
2026-01-03 00:33:47 | INFO | middleware.request_timing | http_request
2026-01-03 00:33:47 | DEBUG | db.session | DB session closed
2026-01-03 00:33:47 | INFO | deps.timing | handler_time
2026-01-03 00:33:47 | DEBUG | db.session | DB session opened
2026-01-03 00:33:47 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107cb1400>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107ca31a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad36c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
             └ <function get at 0x1077c8540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:47 | ERROR | cache | Redis GET failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad36c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
             └ <function get at 0x1077c8540>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 165, in get
    val = c.get(key)
          │     └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
          └ None

AttributeError: 'NoneType' object has no attribute 'get'
2026-01-03 00:33:47 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:33:47 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107ccdfa0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107ca3a60>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad36c0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'voter@example.com', 'exp': '2026-01-03 09:33:47.004320'}
    │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzM6NDcuMDA0MzIwIn0='
    └ <function set at 0x1077c85e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:47 | DEBUG | cache | Fallback cache SET
2026-01-03 00:33:47 | INFO | routes.vote | Cast vote attempt
2026-01-03 00:33:47 | WARNING | routes.vote | User already voted
2026-01-03 00:33:47 | DEBUG | db.session | DB session closed
2026-01-03 00:33:47 | INFO | deps.timing | handler_time
2026-01-03 00:33:47 | INFO | middleware.request_timing | http_request
2026-01-03 00:33:47 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:33:47 | DEBUG | auth.jwt | Access token created
2026-01-03 00:33:47 | DEBUG | db.session | DB session opened
2026-01-03 00:33:47 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107ccfda0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107cddc60>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107c9ca40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ3LjAzMzkzNCJ9'
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ3LjAzMzkzNCJ9'
             └ <function get at 0x1077c8540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:47 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:33:47 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107ab6600>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107ca0a40>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107c9ca40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ3LjAzMzkzNCJ9'
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin3@example.com', 'exp': '2026-01-03 09:33:47.033934'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ3LjAzMzkzNCJ9'
    └ <function set at 0x1077c85e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:47 | DEBUG | cache | Fallback cache SET
2026-01-03 00:33:47 | INFO | routes.election | Create election requested
2026-01-03 00:33:47 | ERROR | routes.election | Failed to deploy election contract; continuing without contract
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 117, in apply_formatters_to_dict
    yield key, formatters[key](item)
          │    │          │    └ '0x...'
          │    │          └ 'bytecode'
          │    └ {'abi': <function normalize_abi at 0x105dc1800>, 'address': functools.partial(<function normalize_address at 0x105dc18a0>, <w...
          └ 'bytecode'
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/normalizers.py", line 278, in normalize_bytecode
    return HexBytes(bytecode)
           │        └ '0x...'
           └ <class 'hexbytes.main.HexBytes'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/main.py", line 35, in __new__
    bytesval = to_bytes(val)
               │        └ '0x...'
               └ <function to_bytes at 0x1057bade0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 17, in to_bytes
    return hexstr_to_bytes(val)
           │               └ '0x...'
           └ <function hexstr_to_bytes at 0x1057bae80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 54, in hexstr_to_bytes
    return binascii.unhexlify(ascii_hex)
           │        │         └ b'0...'
           │        └ <built-in function unhexlify>
           └ <module 'binascii' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload/binascii.cpython-312-d...

binascii.Error: Non-hexadecimal digit found


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_election at 0x1050b1ee0>, db=<sqlalchemy.orm.session.Session object at 0x107cce630>, admin...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107ad3e80>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/routes/election.py", line 26, in create_election
    contract_address = deploy_election(candidate_names)
                       │               └ ['C1']
                       └ <function deploy_election at 0x1050b1da0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/blockchain/deploy.py", line 12, in deploy_election
    contract = w3.eth.contract(abi=ELECTION_ABI, bytecode=BYTECODE)
               │  │   │            │                      └ '0x...'
               │  │   │            └ [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpayable', 't...
               │  │   └ <function Eth.contract at 0x1071f8900>
               │  └ <web3.eth.eth.Eth object at 0x107214a10>
               └ <web3.main.Web3 object at 0x10571a720>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/eth/eth.py", line 689, in contract
    ContractFactory = ContractFactoryClass.factory(self.w3, **kwargs)
                      │                    │       │    │     └ {'abi': [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpaya...
                      │                    │       │    └ <web3.main.Web3 object at 0x10571a720>
                      │                    │       └ <web3.eth.eth.Eth object at 0x107214a10>
                      │                    └ <classmethod(<function Contract.factory at 0x1071d8540>)>
                      └ <class 'web3.contract.contract.Contract'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/contract/contract.py", line 476, in factory
    PropertyCheckingFactory(
    └ <class 'web3._utils.datatypes.PropertyCheckingFactory'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/datatypes.py", line 58, in __new__
    processed_namespace = apply_formatters_to_dict(
                          └ <function apply_formatters_to_dict at 0x105740e00>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/functional.py", line 47, in inner
    return callback(fn(*args, **kwargs))
           │        │   │       └ {}
           │        │   └ ({'abi': <function normalize_abi at 0x105dc1800>, 'address': functools.partial(<function normalize_address at 0x105dc18a0>, <...
           │        └ <function apply_formatters_to_dict at 0x105740d60>
           └ <class 'dict'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 122, in apply_formatters_to_dict
    raise ValueError(new_error_message) from exc
                     └ "Could not format invalid value '0x...' as field 'bytecode'"

ValueError: Could not format invalid value '0x...' as field 'bytecode'
2026-01-03 00:33:47 | INFO | routes.election | Election created
2026-01-03 00:33:47 | INFO | middleware.request_timing | http_request
2026-01-03 00:33:47 | DEBUG | db.session | DB session closed
2026-01-03 00:33:47 | INFO | deps.timing | handler_time
2026-01-03 00:33:47 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:33:47 | DEBUG | auth.jwt | Access token created
2026-01-03 00:33:47 | DEBUG | db.session | DB session opened
2026-01-03 00:33:47 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107cf6a80>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107cdd620>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107c9ca40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ3LjA0NTcxNiJ9'
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ3LjA0NTcxNiJ9'
             └ <function get at 0x1077c8540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:47 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:33:47 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10743dbc0>
           │    └ <redis.retry.Retry object at 0x107cf7e60>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x107cde160>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x107484b80>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x107485c60>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1011ea480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x102a656c0>
    └ <WorkerThread(AnyIO worker thread, started daemon 6192967680)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x1050b1c60>, token='eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x107c9ca40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ3LjA0NTcxNiJ9'
              └ <function decode_access_token at 0x1050b1e40>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'voter2@example.com', 'exp': '2026-01-03 09:33:47.045716'}
    │         └ 'jwt:eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjMzOjQ3LjA0NTcxNiJ9'
    └ <function set at 0x1077c85e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x107367ec0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x107367a60>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x107714540>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10772e700>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10772e7a0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10748d800>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10748d760>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x107484720>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x1074847c0>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x1074849a0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:33:47 | DEBUG | cache | Fallback cache SET
2026-01-03 00:33:47 | INFO | routes.vote | Signed vote recorded
2026-01-03 00:33:47 | INFO | middleware.request_timing | http_request
2026-01-03 00:33:47 | DEBUG | db.session | DB session closed
2026-01-03 00:33:47 | INFO | deps.timing | handler_time
2026-01-03 00:34:07 | INFO | blockchain.web3 | Skipping blockchain connectivity check in test mode
2026-01-03 00:34:07 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:34:07 | DEBUG | auth.jwt | Access token created
2026-01-03 00:34:07 | DEBUG | db.session | DB session opened
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a71b470>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a707880>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a716bc0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjM5NjQ1In0='
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjM5NjQ1In0='
             └ <function get at 0x10a390900>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | WARNING | cache | Initialized in-memory fallback cache
2026-01-03 00:34:07 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a7723f0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a707f60>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a716bc0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjM5NjQ1In0='
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin@example.com', 'exp': '2026-01-03 09:34:07.239645'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW5AZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjM5NjQ1In0='
    └ <function set at 0x10a3909a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | cache | Fallback cache SET
2026-01-03 00:34:07 | INFO | routes.election | Create election requested
2026-01-03 00:34:07 | ERROR | routes.election | Failed to deploy election contract; continuing without contract
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 117, in apply_formatters_to_dict
    yield key, formatters[key](item)
          │    │          │    └ '0x...'
          │    │          └ 'bytecode'
          │    └ {'abi': <function normalize_abi at 0x108e09da0>, 'address': functools.partial(<function normalize_address at 0x108e09e40>, <w...
          └ 'bytecode'
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/normalizers.py", line 278, in normalize_bytecode
    return HexBytes(bytecode)
           │        └ '0x...'
           └ <class 'hexbytes.main.HexBytes'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/main.py", line 35, in __new__
    bytesval = to_bytes(val)
               │        └ '0x...'
               └ <function to_bytes at 0x1089032e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 17, in to_bytes
    return hexstr_to_bytes(val)
           │               └ '0x...'
           └ <function hexstr_to_bytes at 0x108903380>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 54, in hexstr_to_bytes
    return binascii.unhexlify(ascii_hex)
           │        │         └ b'0...'
           │        └ <built-in function unhexlify>
           └ <module 'binascii' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload/binascii.cpython-312-d...

binascii.Error: Non-hexadecimal digit found


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_election at 0x1082560c0>, db=<sqlalchemy.orm.session.Session object at 0x10a71a030>, admin...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a716cc0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/routes/election.py", line 26, in create_election
    contract_address = deploy_election(candidate_names)
                       │               └ ['Alice', 'Bob']
                       └ <function deploy_election at 0x108256340>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/blockchain/deploy.py", line 12, in deploy_election
    contract = w3.eth.contract(abi=ELECTION_ABI, bytecode=BYTECODE)
               │  │   │            │                      └ '0x...'
               │  │   │            └ [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpayable', 't...
               │  │   └ <function Eth.contract at 0x1094e4f40>
               │  └ <web3.eth.eth.Eth object at 0x10950db80>
               └ <web3.main.Web3 object at 0x10950d910>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/eth/eth.py", line 689, in contract
    ContractFactory = ContractFactoryClass.factory(self.w3, **kwargs)
                      │                    │       │    │     └ {'abi': [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpaya...
                      │                    │       │    └ <web3.main.Web3 object at 0x10950d910>
                      │                    │       └ <web3.eth.eth.Eth object at 0x10950db80>
                      │                    └ <classmethod(<function Contract.factory at 0x1094d0b80>)>
                      └ <class 'web3.contract.contract.Contract'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/contract/contract.py", line 476, in factory
    PropertyCheckingFactory(
    └ <class 'web3._utils.datatypes.PropertyCheckingFactory'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/datatypes.py", line 58, in __new__
    processed_namespace = apply_formatters_to_dict(
                          └ <function apply_formatters_to_dict at 0x1088893a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/functional.py", line 47, in inner
    return callback(fn(*args, **kwargs))
           │        │   │       └ {}
           │        │   └ ({'abi': <function normalize_abi at 0x108e09da0>, 'address': functools.partial(<function normalize_address at 0x108e09e40>, <...
           │        └ <function apply_formatters_to_dict at 0x108889300>
           └ <class 'dict'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 122, in apply_formatters_to_dict
    raise ValueError(new_error_message) from exc
                     └ "Could not format invalid value '0x...' as field 'bytecode'"

ValueError: Could not format invalid value '0x...' as field 'bytecode'
2026-01-03 00:34:07 | INFO | routes.election | Election created
2026-01-03 00:34:07 | INFO | middleware.request_timing | http_request
2026-01-03 00:34:07 | DEBUG | db.session | DB session closed
2026-01-03 00:34:07 | INFO | deps.timing | handler_time
2026-01-03 00:34:07 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:34:07 | DEBUG | auth.jwt | Access token created
2026-01-03 00:34:07 | DEBUG | db.session | DB session opened
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a8dd880>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a8c2d40>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a8d9680>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjI4MjMxNCJ9'
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjI4MjMxNCJ9'
             └ <function get at 0x10a390900>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a8debd0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a8c3240>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a8d9680>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjI4MjMxNCJ9'
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin2@example.com', 'exp': '2026-01-03 09:34:07.282314'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW4yQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjI4MjMxNCJ9'
    └ <function set at 0x10a3909a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | cache | Fallback cache SET
2026-01-03 00:34:07 | INFO | routes.election | Create election requested
2026-01-03 00:34:07 | ERROR | routes.election | Failed to deploy election contract; continuing without contract
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 117, in apply_formatters_to_dict
    yield key, formatters[key](item)
          │    │          │    └ '0x...'
          │    │          └ 'bytecode'
          │    └ {'abi': <function normalize_abi at 0x108e09da0>, 'address': functools.partial(<function normalize_address at 0x108e09e40>, <w...
          └ 'bytecode'
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/normalizers.py", line 278, in normalize_bytecode
    return HexBytes(bytecode)
           │        └ '0x...'
           └ <class 'hexbytes.main.HexBytes'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/main.py", line 35, in __new__
    bytesval = to_bytes(val)
               │        └ '0x...'
               └ <function to_bytes at 0x1089032e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 17, in to_bytes
    return hexstr_to_bytes(val)
           │               └ '0x...'
           └ <function hexstr_to_bytes at 0x108903380>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 54, in hexstr_to_bytes
    return binascii.unhexlify(ascii_hex)
           │        │         └ b'0...'
           │        └ <built-in function unhexlify>
           └ <module 'binascii' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload/binascii.cpython-312-d...

binascii.Error: Non-hexadecimal digit found


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_election at 0x1082560c0>, db=<sqlalchemy.orm.session.Session object at 0x10a8dc4a0>, admin...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a716bc0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/routes/election.py", line 26, in create_election
    contract_address = deploy_election(candidate_names)
                       │               └ ['X', 'Y']
                       └ <function deploy_election at 0x108256340>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/blockchain/deploy.py", line 12, in deploy_election
    contract = w3.eth.contract(abi=ELECTION_ABI, bytecode=BYTECODE)
               │  │   │            │                      └ '0x...'
               │  │   │            └ [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpayable', 't...
               │  │   └ <function Eth.contract at 0x1094e4f40>
               │  └ <web3.eth.eth.Eth object at 0x10950db80>
               └ <web3.main.Web3 object at 0x10950d910>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/eth/eth.py", line 689, in contract
    ContractFactory = ContractFactoryClass.factory(self.w3, **kwargs)
                      │                    │       │    │     └ {'abi': [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpaya...
                      │                    │       │    └ <web3.main.Web3 object at 0x10950d910>
                      │                    │       └ <web3.eth.eth.Eth object at 0x10950db80>
                      │                    └ <classmethod(<function Contract.factory at 0x1094d0b80>)>
                      └ <class 'web3.contract.contract.Contract'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/contract/contract.py", line 476, in factory
    PropertyCheckingFactory(
    └ <class 'web3._utils.datatypes.PropertyCheckingFactory'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/datatypes.py", line 58, in __new__
    processed_namespace = apply_formatters_to_dict(
                          └ <function apply_formatters_to_dict at 0x1088893a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/functional.py", line 47, in inner
    return callback(fn(*args, **kwargs))
           │        │   │       └ {}
           │        │   └ ({'abi': <function normalize_abi at 0x108e09da0>, 'address': functools.partial(<function normalize_address at 0x108e09e40>, <...
           │        └ <function apply_formatters_to_dict at 0x108889300>
           └ <class 'dict'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 122, in apply_formatters_to_dict
    raise ValueError(new_error_message) from exc
                     └ "Could not format invalid value '0x...' as field 'bytecode'"

ValueError: Could not format invalid value '0x...' as field 'bytecode'
2026-01-03 00:34:07 | INFO | routes.election | Election created
2026-01-03 00:34:07 | INFO | middleware.request_timing | http_request
2026-01-03 00:34:07 | DEBUG | db.session | DB session closed
2026-01-03 00:34:07 | INFO | deps.timing | handler_time
2026-01-03 00:34:07 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:34:07 | DEBUG | auth.jwt | Access token created
2026-01-03 00:34:07 | DEBUG | db.session | DB session opened
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a8dd070>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a8f8400>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a6ccc00>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
             └ <function get at 0x10a390900>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a719880>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10742ae80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a6ccc00>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'voter@example.com', 'exp': '2026-01-03 09:34:07.294399'}
    │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
    └ <function set at 0x10a3909a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | cache | Fallback cache SET
2026-01-03 00:34:07 | INFO | routes.vote | Cast vote attempt
2026-01-03 00:34:07 | INFO | routes.vote | Vote cast
2026-01-03 00:34:07 | INFO | middleware.request_timing | http_request
2026-01-03 00:34:07 | DEBUG | db.session | DB session closed
2026-01-03 00:34:07 | INFO | deps.timing | handler_time
2026-01-03 00:34:07 | DEBUG | db.session | DB session opened
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a902ba0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a8f9e40>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a716bc0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
             └ <function get at 0x10a390900>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | ERROR | cache | Redis GET failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a716bc0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
             └ <function get at 0x10a390900>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 165, in get
    val = c.get(key)
          │     └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
          └ None

AttributeError: 'NoneType' object has no attribute 'get'
2026-01-03 00:34:07 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a903f80>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a8f9a80>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYt...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a716bc0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'voter@example.com', 'exp': '2026-01-03 09:34:07.294399'}
    │         └ 'jwt:eyJzdWIiOiAidm90ZXJAZXhhbXBsZS5jb20iLCAiZXhwIjogIjIwMjYtMDEtMDMgMDk6MzQ6MDcuMjk0Mzk5In0='
    └ <function set at 0x10a3909a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | cache | Fallback cache SET
2026-01-03 00:34:07 | INFO | routes.vote | Cast vote attempt
2026-01-03 00:34:07 | WARNING | routes.vote | User already voted
2026-01-03 00:34:07 | DEBUG | db.session | DB session closed
2026-01-03 00:34:07 | INFO | deps.timing | handler_time
2026-01-03 00:34:07 | INFO | middleware.request_timing | http_request
2026-01-03 00:34:07 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:34:07 | DEBUG | auth.jwt | Access token created
2026-01-03 00:34:07 | DEBUG | db.session | DB session opened
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a92f230>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a934720>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a91d440>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjMyNTYyOSJ9'
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjMyNTYyOSJ9'
             └ <function get at 0x10a390900>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a92f5f0>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a8c3380>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a91d440>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjMyNTYyOSJ9'
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'admin3@example.com', 'exp': '2026-01-03 09:34:07.325629'}
    │         └ 'jwt:eyJzdWIiOiAiYWRtaW4zQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjMyNTYyOSJ9'
    └ <function set at 0x10a3909a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | cache | Fallback cache SET
2026-01-03 00:34:07 | INFO | routes.election | Create election requested
2026-01-03 00:34:07 | ERROR | routes.election | Failed to deploy election contract; continuing without contract
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 117, in apply_formatters_to_dict
    yield key, formatters[key](item)
          │    │          │    └ '0x...'
          │    │          └ 'bytecode'
          │    └ {'abi': <function normalize_abi at 0x108e09da0>, 'address': functools.partial(<function normalize_address at 0x108e09e40>, <w...
          └ 'bytecode'
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/normalizers.py", line 278, in normalize_bytecode
    return HexBytes(bytecode)
           │        └ '0x...'
           └ <class 'hexbytes.main.HexBytes'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/main.py", line 35, in __new__
    bytesval = to_bytes(val)
               │        └ '0x...'
               └ <function to_bytes at 0x1089032e0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 17, in to_bytes
    return hexstr_to_bytes(val)
           │               └ '0x...'
           └ <function hexstr_to_bytes at 0x108903380>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/hexbytes/_utils.py", line 54, in hexstr_to_bytes
    return binascii.unhexlify(ascii_hex)
           │        │         └ b'0...'
           │        └ <built-in function unhexlify>
           └ <module 'binascii' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/lib-dynload/binascii.cpython-312-d...

binascii.Error: Non-hexadecimal digit found


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function create_election at 0x1082560c0>, db=<sqlalchemy.orm.session.Session object at 0x10a92da90>, admin...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a3c57c0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/routes/election.py", line 26, in create_election
    contract_address = deploy_election(candidate_names)
                       │               └ ['C1']
                       └ <function deploy_election at 0x108256340>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/blockchain/deploy.py", line 12, in deploy_election
    contract = w3.eth.contract(abi=ELECTION_ABI, bytecode=BYTECODE)
               │  │   │            │                      └ '0x...'
               │  │   │            └ [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpayable', 't...
               │  │   └ <function Eth.contract at 0x1094e4f40>
               │  └ <web3.eth.eth.Eth object at 0x10950db80>
               └ <web3.main.Web3 object at 0x10950d910>

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/eth/eth.py", line 689, in contract
    ContractFactory = ContractFactoryClass.factory(self.w3, **kwargs)
                      │                    │       │    │     └ {'abi': [{'inputs': [{'internalType': 'string[]', 'name': 'candidateNames', 'type': 'string[]'}], 'stateMutability': 'nonpaya...
                      │                    │       │    └ <web3.main.Web3 object at 0x10950d910>
                      │                    │       └ <web3.eth.eth.Eth object at 0x10950db80>
                      │                    └ <classmethod(<function Contract.factory at 0x1094d0b80>)>
                      └ <class 'web3.contract.contract.Contract'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/contract/contract.py", line 476, in factory
    PropertyCheckingFactory(
    └ <class 'web3._utils.datatypes.PropertyCheckingFactory'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/web3/_utils/datatypes.py", line 58, in __new__
    processed_namespace = apply_formatters_to_dict(
                          └ <function apply_formatters_to_dict at 0x1088893a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/functional.py", line 47, in inner
    return callback(fn(*args, **kwargs))
           │        │   │       └ {}
           │        │   └ ({'abi': <function normalize_abi at 0x108e09da0>, 'address': functools.partial(<function normalize_address at 0x108e09e40>, <...
           │        └ <function apply_formatters_to_dict at 0x108889300>
           └ <class 'dict'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/eth_utils/applicators.py", line 122, in apply_formatters_to_dict
    raise ValueError(new_error_message) from exc
                     └ "Could not format invalid value '0x...' as field 'bytecode'"

ValueError: Could not format invalid value '0x...' as field 'bytecode'
2026-01-03 00:34:07 | INFO | routes.election | Election created
2026-01-03 00:34:07 | INFO | middleware.request_timing | http_request
2026-01-03 00:34:07 | DEBUG | db.session | DB session closed
2026-01-03 00:34:07 | INFO | deps.timing | handler_time
2026-01-03 00:34:07 | DEBUG | auth.jwt | Creating access token
2026-01-03 00:34:07 | DEBUG | auth.jwt | Access token created
2026-01-03 00:34:07 | DEBUG | db.session | DB session opened
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a946510>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a934040>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a91d440>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjMzODA4MCJ9'
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 57, in decode_access_token
    cached = cache_get(cache_key)
             │         └ 'jwt:eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjMzODA4MCJ9'
             └ <function get at 0x10a390900>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 146, in get
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | auth.jwt | Token decoded
2026-01-03 00:34:07 | ERROR | cache | Failed to connect to Redis; falling back to in-memory cache
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 855, in connect_check_health
    sock = self.retry.call_with_retry(
           │    │     └ <function Retry.call_with_retry at 0x10a1de200>
           │    └ <redis.retry.Retry object at 0x10a946600>
           └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/retry.py", line 116, in call_with_retry
    return do()
           └ <function AbstractConnection.connect_check_health.<locals>.<lambda> at 0x10a8c34c0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 856, in <lambda>
    lambda: self._connect(), lambda error: self.disconnect(error)
            │    │                         │    └ <function AbstractConnection.disconnect at 0x10a2191c0>
            │    │                         └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
            │    └ <function Connection._connect at 0x10a21a2a0>
            └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1306, in _connect
    raise err
          └ ConnectionRefusedError(61, 'Connection refused')
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 1290, in _connect
    sock.connect(socket_address)
    │    │       └ ('127.0.0.1', 6379)
    │    └ <method 'connect' of '_socket.socket' objects>
    └ <socket.socket [closed] fd=-1, family=2, type=1, proto=6>

ConnectionRefusedError: [Errno 61] Connection refused


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1030, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x104c66480>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/threading.py", line 1073, in _bootstrap_inner
    self.run()
    │    └ <function WorkerThread.run at 0x1062e9760>
    └ <WorkerThread(AnyIO worker thread, started daemon 6131625984)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 986, in run
    result = context.run(func, *args)
             │       │   │      └ ()
             │       │   └ functools.partial(<function get_current_user at 0x108256200>, token='eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2...
             │       └ <method 'run' of '_contextvars.Context' objects>
             └ <_contextvars.Context object at 0x10a91d440>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/security.py", line 15, in get_current_user
    payload = decode_access_token(token)
              │                   └ 'eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjMzODA4MCJ9'
              └ <function decode_access_token at 0x1082563e0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/auths/jwt.py", line 75, in decode_access_token
    cache_set(cache_key, payload, ex=60)
    │         │          └ {'sub': 'voter2@example.com', 'exp': '2026-01-03 09:34:07.338080'}
    │         └ 'jwt:eyJzdWIiOiAidm90ZXIyQGV4YW1wbGUuY29tIiwgImV4cCI6ICIyMDI2LTAxLTAzIDA5OjM0OjA3LjMzODA4MCJ9'
    └ <function set at 0x10a3909a0>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 182, in set
    c = client()
        └ <function client at 0x10968c540>

  File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 81, in client
    _client = _make_client()
              └ <function _make_client at 0x10968c0e0>

> File "/Users/best/Desktop/Debbie/blockchain-voting-system/backend/app/utils/cache.py", line 32, in _make_client
    client.ping()
    │      └ <function ManagementCommands.ping at 0x10a2d0b80>
    └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...

  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/commands/core.py", line 1226, in ping
    return self.execute_command("PING", **kwargs)
           │    │                         └ {}
           │    └ <function Redis.execute_command at 0x10a2f2d40>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 657, in execute_command
    return self._execute_command(*args, **options)
           │    │                 │       └ {}
           │    │                 └ ('PING',)
           │    └ <function Redis._execute_command at 0x10a2f2de0>
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/client.py", line 663, in _execute_command
    conn = self.connection or pool.get_connection()
           │    │             │    └ <function ConnectionPool.get_connection at 0x10a221e40>
           │    │             └ <redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>
           │    └ None
           └ <redis.client.Redis(<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/utils.py", line 196, in wrapper
    return func(*args, **kwargs)
           │     │       └ {}
           │     └ (<redis.connection.ConnectionPool(<redis.connection.Connection(decode_responses=True,host=localhost,port=6379,db=0)>)>,)
           └ <function ConnectionPool.get_connection at 0x10a221da0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 2603, in get_connection
    connection.connect()
    │          └ <function AbstractConnection.connect at 0x10a218d60>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 846, in connect
    self.connect_check_health(check_health=True)
    │    └ <function AbstractConnection.connect_check_health at 0x10a218e00>
    └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/redis/connection.py", line 863, in connect_check_health
    raise ConnectionError(self._error_message(e))
          │               │    └ <function AbstractConnection._error_message at 0x10a218fe0>
          │               └ <redis.connection.Connection(host=localhost,port=6379,db=0)>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 61 connecting to localhost:6379. Connection refused.
2026-01-03 00:34:07 | DEBUG | cache | Fallback cache SET
2026-01-03 00:34:07 | INFO | routes.vote | Signed vote recorded
2026-01-03 00:34:07 | INFO | middleware.request_timing | http_request
2026-01-03 00:34:07 | DEBUG | db.session | DB session closed
2026-01-03 00:34:07 | INFO | deps.timing | handler_time
2026-01-03 00:34:07 | INFO | middleware.request_timing | http_request
2026-01-03 00:34:07 | INFO | deps.timing | handler_time
